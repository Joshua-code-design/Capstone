<!DOCTYPE html>
<html lang="en">

<head>
    <title>Adminty - Premium Admin Template by Colorlib </title>
    <!-- HTML5 Shim and Respond.js IE10 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 10]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
    <!-- Meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="#">
    <meta name="keywords" content="flat ui, admin Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
    <meta name="author" content="#">
    <!-- Favicon icon -->
    <link rel="icon" href="..\files\assets\images\favicon.ico" type="image/x-icon">
    <!-- Google font-->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600,800" rel="stylesheet">
    <!-- Required Fremwork -->
    <link rel="stylesheet" type="text/css" href="..\files\bower_components\bootstrap\css\bootstrap.min.css">
    <!-- feather Awesome -->
    <link rel="stylesheet" type="text/css" href="..\files\assets\icon\feather\css\feather.css">
    <!-- Style.css -->
    <link rel="stylesheet" type="text/css" href="..\files\assets\css\style.css">
    <link rel="stylesheet" type="text/css" href="..\files\assets\css\analytics.css">
    <link rel="stylesheet" type="text/css" href="..\files\assets\css\jquery.mCustomScrollbar.css">
</head>

<body>
    <!-- Pre-loader start -->
    <div class="theme-loader">
        <div class="ball-scale">
            <div class='contain'>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
                <div class="ring">
                    <div class="frame"></div>
                </div>
            </div>
        </div>
    </div>
    <!-- Pre-loader end -->
    <div id="pcoded" class="pcoded">
        <div class="pcoded-overlay-box"></div>
        <div class="pcoded-container navbar-wrapper">

            <nav class="navbar header-navbar pcoded-header">
                <div class="navbar-wrapper">

                    <div class="navbar-logo">
                        <a class="mobile-menu" id="mobile-collapse" href="#!">
                            <i class="feather icon-menu"></i>
                        </a>
                        <a href="index-1.htm">
                            <img class="img-fluid" src="..\files\assets\images\logo.png" alt="Theme-Logo">
                        </a>
                        <a class="mobile-options">
                            <i class="feather icon-more-horizontal"></i>
                        </a>
                    </div>

                    <div class="navbar-container container-fluid">
                        <ul class="nav-left">
                            <li class="header-search">
                                <div class="main-search morphsearch-search">
                                    <div class="input-group">
                                        <span class="input-group-addon search-close"><i class="feather icon-x"></i></span>
                                        <input type="text" class="form-control">
                                        <span class="input-group-addon search-btn"><i class="feather icon-search"></i></span>
                                    </div>
                                </div>
                            </li>
                            <li>
                                <a href="#!" onclick="javascript:toggleFullScreen()">
                                    <i class="feather icon-maximize full-screen"></i>
                                </a>
                            </li>
                        </ul>
                        <ul class="nav-right">
                            <li class="header-notification">
                                <div class="dropdown-primary dropdown">
                                    <div class="dropdown-toggle" data-toggle="dropdown">
                                        <i class="feather icon-bell"></i>
                                        <span class="badge bg-c-pink">5</span>
                                    </div>
                                    <ul class="show-notification notification-view dropdown-menu" data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                                        <li>
                                            <h6>Notifications</h6>
                                            <label class="label label-danger">New</label>
                                        </li>
                                        <li>
                                            <div class="media">
                                                <img class="d-flex align-self-center img-radius" src="..\files\assets\images\avatar-4.jpg" alt="Generic placeholder image">
                                                <div class="media-body">
                                                    <h5 class="notification-user">John Doe</h5>
                                                    <p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
                                                    <span class="notification-time">30 minutes ago</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="media">
                                                <img class="d-flex align-self-center img-radius" src="..\files\assets\images\avatar-3.jpg" alt="Generic placeholder image">
                                                <div class="media-body">
                                                    <h5 class="notification-user">Joseph William</h5>
                                                    <p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
                                                    <span class="notification-time">30 minutes ago</span>
                                                </div>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="media">
                                                <img class="d-flex align-self-center img-radius" src="..\files\assets\images\avatar-4.jpg" alt="Generic placeholder image">
                                                <div class="media-body">
                                                    <h5 class="notification-user">Sara Soudein</h5>
                                                    <p class="notification-msg">Lorem ipsum dolor sit amet, consectetuer elit.</p>
                                                    <span class="notification-time">30 minutes ago</span>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </li>
                            <li class="user-profile header-notification">
                                <div class="dropdown-primary dropdown">
                                    <div class="dropdown-toggle" data-toggle="dropdown">
                                        <img src="..\files\assets\images\avatar-4.jpg" class="img-radius" alt="User-Profile-Image">
                                        <span>John Doe</span>
                                        <i class="feather icon-chevron-down"></i>
                                    </div>
                                    <ul class="show-notification profile-notification dropdown-menu" data-dropdown-in="fadeIn" data-dropdown-out="fadeOut">
                                        <li>
                                            <a href="user-profile.htm">
                                                <i class="feather icon-user"></i> Profile
                                            </a>
                                        </li>
                                        <li>
                                            <a href="auth-normal-sign-in.htm">
                                                <i class="feather icon-log-out"></i> Logout
                                            </a>
                                        </li>
                                    </ul>

                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- Sidebar chat start -->
            <div id="sidebar" class="users p-chat-user showChat">
                <div class="had-container">
                    <div class="card card_main p-fixed users-main">
                        <div class="user-box">
                            <div class="chat-inner-header">
                                <div class="back_chatBox">
                                    <div class="right-icon-control">
                                        <input type="text" class="form-control  search-text" placeholder="Search Friend" id="search-friends">
                                        <div class="form-icon">
                                            <i class="icofont icofont-search"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="main-friend-list">
                                <div class="media userlist-box" data-id="1" data-status="online" data-username="Josephin Doe" data-toggle="tooltip" data-placement="left" title="Josephin Doe">
                                    <a class="media-left" href="#!">
                                        <img class="media-object img-radius img-radius" src="..\files\assets\images\avatar-3.jpg" alt="Generic placeholder image ">
                                        <div class="live-status bg-success"></div>
                                    </a>
                                    <div class="media-body">
                                        <div class="f-13 chat-header">Josephin Doe</div>
                                    </div>
                                </div>
                                <div class="media userlist-box" data-id="2" data-status="online" data-username="Lary Doe" data-toggle="tooltip" data-placement="left" title="Lary Doe">
                                    <a class="media-left" href="#!">
                                        <img class="media-object img-radius" src="..\files\assets\images\avatar-2.jpg" alt="Generic placeholder image">
                                        <div class="live-status bg-success"></div>
                                    </a>
                                    <div class="media-body">
                                        <div class="f-13 chat-header">Lary Doe</div>
                                    </div>
                                </div>
                                <div class="media userlist-box" data-id="3" data-status="online" data-username="Alice" data-toggle="tooltip" data-placement="left" title="Alice">
                                    <a class="media-left" href="#!">
                                        <img class="media-object img-radius" src="..\files\assets\images\avatar-4.jpg" alt="Generic placeholder image">
                                        <div class="live-status bg-success"></div>
                                    </a>
                                    <div class="media-body">
                                        <div class="f-13 chat-header">Alice</div>
                                    </div>
                                </div>
                                <div class="media userlist-box" data-id="4" data-status="online" data-username="Alia" data-toggle="tooltip" data-placement="left" title="Alia">
                                    <a class="media-left" href="#!">
                                        <img class="media-object img-radius" src="..\files\assets\images\avatar-3.jpg" alt="Generic placeholder image">
                                        <div class="live-status bg-success"></div>
                                    </a>
                                    <div class="media-body">
                                        <div class="f-13 chat-header">Alia</div>
                                    </div>
                                </div>
                                <div class="media userlist-box" data-id="5" data-status="online" data-username="Suzen" data-toggle="tooltip" data-placement="left" title="Suzen">
                                    <a class="media-left" href="#!">
                                        <img class="media-object img-radius" src="..\files\assets\images\avatar-2.jpg" alt="Generic placeholder image">
                                        <div class="live-status bg-success"></div>
                                    </a>
                                    <div class="media-body">
                                        <div class="f-13 chat-header">Suzen</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        
                <div class="chat-reply-box p-b-20">
                    <div class="right-icon-control">
                        <input type="text" class="form-control search-text" placeholder="Share Your Thoughts">
                        <div class="form-icon">
                            <i class="feather icon-navigation"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="pcoded-main-container">
                <div class="pcoded-wrapper">
                    <nav class="pcoded-navbar">
                        <div class="pcoded-inner-navbar main-menu">
                            <div class="pcoded-navigatio-lavel">Navigation</div>
                            <ul class="pcoded-item pcoded-left-item">
                                <li class="pcoded-hasmenu active pcoded-trigger">
                                    <a href="javascript:void(0)">
                                        <span class="pcoded-micon"><i class="feather icon-home"></i></span>
                                        <span class="pcoded-mtext">Dashboard</span>
                                    </a>
                                    <ul class="pcoded-submenu">
                                        <li class="">
                                            <a href="index-1.htm">
                                                <span class="">Data</span>
                                            </a>
                                        </li>
                                        <li class="">
                                            <a href="dashboard-crm.htm">
                                                <span class="">Branggay</span>
                                            </a>
                                        </li>
                                        <li class="active">
                                            <a href="dashboard-analytics.htm">
                                                <span class="">Analytics</span>
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </nav>


                    <div class="pcoded-content">
                        <div class="pcoded-inner-content">
                            <div class="main-body">
                                <div class="page-wrapper">
                                
                                    <div class="container">
                                        <div class="header">
                                            <h1>Barangay and Purok Directory</h1>
                                            <p class="subtitle">Comprehensive listing of all Barangays and their corresponding Puroks</p>
                                        </div>
                                    
                                        <div class="controls">
                                            <input type="text" class="search-bar" id="searchInput" placeholder="Search for Barangay or Purok...">
                                            <select id="filterBarangay" class="custom-select">
                                                <!-- Filter options will be populated dynamically -->
                                            </select>
                                        </div>
                                    
                                        <div class="summary-stats">
                                            <div class="stat-card">
                                                <i class="fas fa-wheelchair"></i>
                                                <div class="stat-value" id="totalPWD">0</div>
                                                <div class="stat-label">PWD Residents</div>
                                            </div>
                                            <div class="stat-card">
                                                <i class="fas fa-user-friends"></i>
                                                <div class="stat-value" id="totalSeniors">0</div>
                                                <div class="stat-label">Senior Citizens</div>
                                            </div>
                                            <div class="stat-card">
                                                <i class="fas fa-map-marker-alt"></i>
                                                <div class="stat-value" id="totalBarangays">0</div>
                                                <div class="stat-label">Barangays</div>
                                            </div>
                                            <div class="stat-card">
                                                <i class="fas fa-users"></i>
                                                <div class="stat-value" id="totalPriority">0</div>
                                                <div class="stat-label">Total Priority</div>
                                            </div>
                                        </div>
                                    
                                        <div class="table-container">
                                            <table id="directoryTable">
                                                <thead>
                                                    <tr>
                                                        <th>Barangay</th>
                                                        <th>Puroks</th>
                                                        <th>PWD Count</th>
                                                        <th>Senior Citizens</th>
                                                        <th>Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <!-- Table rows will be generated dynamically -->
                                                </tbody>
                                            </table>
                                        </div>
                                    
                                        <div class="chart-container">
                                            <canvas id="dashboardChart"></canvas>
                                        </div>
                                    
                                        <div class="pagination" id="pagination">
                                            <!-- Pagination will be generated dynamically if needed -->
                                        </div>
                                    </div>
                                                                    

                                                                </div>
                                                            </div>
            
                                                        </div>
                                                        <!-- latest activity end -->
                                                    </div>
                                                </div>
                                            </div>
            
                                            <div id="styleSelector">
            
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            

    <!-- Warning Section Starts -->
    <!-- Older IE warning message -->
    <!--[if lt IE 10]>
<div class="ie-warning">
    <h1>Warning!!</h1>
    <p>You are using an outdated version of Internet Explorer, please upgrade <br/>to any of the following web browsers to access this website.</p>
    <div class="iew-container">
        <ul class="iew-download">
            <li>
                <a href="http://www.google.com/chrome/">
                    <img src="../files/assets/images/browser/chrome.png" alt="Chrome">
                    <div>Chrome</div>
                </a>
            </li>
            <li>
                <a href="https://www.mozilla.org/en-US/firefox/new/">
                    <img src="../files/assets/images/browser/firefox.png" alt="Firefox">
                    <div>Firefox</div>
                </a>
            </li>
            <li>
                <a href="http://www.opera.com">
                    <img src="../files/assets/images/browser/opera.png" alt="Opera">
                    <div>Opera</div>
                </a>
            </li>
            <li>
                <a href="https://www.apple.com/safari/">
                    <img src="../files/assets/images/browser/safari.png" alt="Safari">
                    <div>Safari</div>
                </a>
            </li>
            <li>
                <a href="http://windows.microsoft.com/en-us/internet-explorer/download-ie">
                    <img src="../files/assets/images/browser/ie.png" alt="">
                    <div>IE (9 & above)</div>
                </a>
            </li>
        </ul>
    </div>
    <p>Sorry for the inconvenience!</p>
</div>
<![endif]-->
    <!-- Warning Section Ends -->
    <!-- Required Jquery -->
    <script type="text/javascript" src="..\files\bower_components\jquery\js\jquery.min.js"></script>
    <script type="text/javascript" src="..\files\bower_components\jquery-ui\js\jquery-ui.min.js"></script>
    <script type="text/javascript" src="..\files\bower_components\popper.js\js\popper.min.js"></script>
    <script type="text/javascript" src="..\files\bower_components\bootstrap\js\bootstrap.min.js"></script>
    <!-- jquery slimscroll js -->
    <script type="text/javascript" src="..\files\bower_components\jquery-slimscroll\js\jquery.slimscroll.js"></script>
    <!-- modernizr js -->
    <script type="text/javascript" src="..\files\bower_components\modernizr\js\modernizr.js"></script>
    <script type="text/javascript" src="..\files\bower_components\modernizr\js\css-scrollbars.js"></script>
    <!-- Chart js -->
    <script type="text/javascript" src="..\files\bower_components\chart.js\js\Chart.js"></script>
    <!-- amchart js -->
    <script src="..\files\assets\pages\widget\amchart\amcharts.js"></script>
    <script src="..\files\assets\pages\widget\amchart\serial.js"></script>
    <script src="..\files\assets\pages\widget\amchart\light.js"></script>
    <!-- Custom js -->
    <script type="text/javascript" src="..\files\assets\js\SmoothScroll.js"></script>
    <script src="..\files\assets\js\pcoded.min.js"></script>
    <script src="..\files\assets\js\jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="..\files\assets\js\vartical-layout.min.js"></script>
    <script type="text/javascript" src="..\files\assets\pages\dashboard\analytic-dashboard.min.js"></script>
    <script type="text/javascript" src="..\files\assets\js\script.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-23581568-13');


  // Updated data structure with PWD and Senior Citizens
const barangayData = {
    1: { 
        name: "Barangay 1",
        puroks: ["Kamagong", "Narra", "Ipil-Ipil", "Akasya", "Flying-E"], 
        pwdCount: 42,
        seniorCount: 156
    },
    2: { 
        name: "Barangay 2",
        puroks: ["Gomez", "Katipunan", "Kahilwayan", "Sool Uno", "Sool Dos"], 
        pwdCount: 38,
        seniorCount: 124
    },
    3: { 
        name: "Barangay 3",
        puroks: ["Paghida.et A", "Paghida.et B", "Ilimnan", "Guintipunan", "Mahigugmaon"], 
        pwdCount: 29,
        seniorCount: 98
    },
    4: { 
        name: "Barangay 4",
        puroks: ["Antilla Subd", "Gomez Extension", "Bonifacio Extension", "Mckinley Bukid", "Zulueta Bukid"], 
        pwdCount: 45,
        seniorCount: 167
    },
    5: { 
        name: "Barangay 5",
        puroks: ["Elina subd", "Portuna", "St francis", "Carmilla paste 3", "Villa carmen"], 
        pwdCount: 31,
        seniorCount: 119
    },
    6: { 
        name: "Barangay Mambulac",
        puroks: ["Paghidaet", "Antoni Luna", "Swimming Pool", "Boulevard", "Barra"], 
        pwdCount: 53,
        seniorCount: 187
    },
    7: { 
        name: "Barangay Guinhalaran",
        puroks: ["Katilingban", "Sawmill", "Paghidait", "Mangingisda", "Baybayon"], 
        pwdCount: 47,
        seniorCount: 136
    },
    8: { 
        name: "Barangay E-Lopez",
        puroks: ["Sunshine", "Sunrise", "Sunset", "Sampaguita", "Newsite"], 
        pwdCount: 35,
        seniorCount: 145
    },
    9: { 
        name: "Barangay Bagtic",
        puroks: ["Proper", "New site", "Bactic uno", "Kalbaryo", "Defuigo"], 
        pwdCount: 41,
        seniorCount: 112
    },
    10: { 
        name: "Barangay Balaring",
        puroks: ["Camunsilan", "Proper", "Bungol", "Hda Balaring", "Pasil"], 
        pwdCount: 38,
        seniorCount: 158
    },
    11: { 
        name: "Barangay Hawaiian",
        puroks: ["Colisap", "Phison", "balas", "Lunot", "Sandiego"], 
        pwdCount: 26,
        seniorCount: 94
    },
    12: { 
        name: "Barangay Patag",
        puroks: ["Mahigugmaon", "Malipayun", "Mainabyanon", "Marka"], 
        pwdCount: 33,
        seniorCount: 127
    },
    13: { 
        name: "Barangay Kapt. Ramon",
        puroks: ["Hda.Adoracion", "Hda.Boac", "Hda.Progreso", "Hda.Banita jarra", "Hda.Violata"], 
        pwdCount: 44,
        seniorCount: 165
    },
    14: { 
        name: "Barangay Guimbalaon",
        puroks: ["Proper", "New Site", "Bactic Uno", "Kalbaryo", "Defuigo"], 
        pwdCount: 37,
        seniorCount: 129
    },
    15: { 
        name: "Barangay Rizal",
        puroks: ["Matagoy", "Paradise", "Kalubihan", "Baryo Rizal", "Hda Makina"], 
        pwdCount: 51,
        seniorCount: 173
    },
    16: { 
        name: "Barangay Lantad",
        puroks: ["Mapisanon", "Nami nami", "Bay-bay", "Paraiso", "Mainuswagon"], 
        pwdCount: 34,
        seniorCount: 108
    }
};

// Function to populate the table
function populateTable(data = barangayData) {
    const tableBody = document.querySelector('#directoryTable tbody');
    tableBody.innerHTML = '';
    
    Object.keys(data).forEach(key => {
        const barangay = data[key];
        
        const row = document.createElement('tr');
        
        // Barangay Name with badge
        const nameCell = document.createElement('td');
        const barangayName = document.createElement('div');
        barangayName.className = 'barangay-name';
        
        const badge = document.createElement('span');
        badge.className = 'badge';
        badge.textContent = key;
        badge.style.backgroundColor = getColorForBadge(parseInt(key));
        
        const name = document.createElement('span');
        name.textContent = barangay.name;
        
        barangayName.appendChild(badge);
        barangayName.appendChild(name);
        nameCell.appendChild(barangayName);
        row.appendChild(nameCell);
        
        // Puroks as dropdown
        const puroksCell = document.createElement('td');
        const purokSelect = document.createElement('select');
        purokSelect.className = 'custom-select';
        
        const defaultPurokOption = document.createElement('option');
        defaultPurokOption.value = '';
        defaultPurokOption.textContent = 'Select Purok';
        defaultPurokOption.selected = true;
        purokSelect.appendChild(defaultPurokOption);
        
        barangay.puroks.forEach(purok => {
            const option = document.createElement('option');
            option.value = purok;
            option.textContent = purok;
            purokSelect.appendChild(option);
        });
        
        purokSelect.addEventListener('change', function() {
            if (this.value) {
                showNotification(`Selected Purok: ${this.value} in ${barangay.name}`);
            }
        });
        
        puroksCell.appendChild(purokSelect);
        row.appendChild(puroksCell);
        
        // PWD Count
        const pwdCell = document.createElement('td');
        pwdCell.className = 'stat-cell';
        
        const pwdWrapper = document.createElement('div');
        pwdWrapper.className = 'stat-wrapper';
        
        const pwdIcon = document.createElement('i');
        pwdIcon.className = 'fas fa-wheelchair';
        
        const pwdCount = document.createElement('span');
        pwdCount.className = 'stat-count';
        pwdCount.textContent = barangay.pwdCount;
        
        pwdWrapper.appendChild(pwdIcon);
        pwdWrapper.appendChild(pwdCount);
        pwdCell.appendChild(pwdWrapper);
        row.appendChild(pwdCell);
        
        // Senior Count
        const seniorCell = document.createElement('td');
        seniorCell.className = 'stat-cell';
        
        const seniorWrapper = document.createElement('div');
        seniorWrapper.className = 'stat-wrapper';
        
        const seniorIcon = document.createElement('i');
        seniorIcon.className = 'fas fa-user-friends';
        
        const seniorCount = document.createElement('span');
        seniorCount.className = 'stat-count';
        seniorCount.textContent = barangay.seniorCount;
        
        seniorWrapper.appendChild(seniorIcon);
        seniorWrapper.appendChild(seniorCount);
        seniorCell.appendChild(seniorWrapper);
        row.appendChild(seniorCell);
        
        // Actions
        const actionsCell = document.createElement('td');
        actionsCell.className = 'actions-cell';
        
        const viewBtn = document.createElement('button');
        viewBtn.className = 'btn btn-view';
        viewBtn.innerHTML = '<i class="fas fa-eye"></i> View';
        viewBtn.onclick = () => showBarangayDetails(barangay);
        
        const editBtn = document.createElement('button');
        editBtn.className = 'btn btn-edit';
        editBtn.innerHTML = '<i class="fas fa-edit"></i> Edit';
        editBtn.onclick = () => editBarangayData(key, barangay);
        
        actionsCell.appendChild(viewBtn);
        actionsCell.appendChild(editBtn);
        row.appendChild(actionsCell);
        
        tableBody.appendChild(row);
    });
}

// Function to show notification
function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'notification';
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    // Trigger animation
    setTimeout(() => {
        notification.classList.add('show');
    }, 10);
    
    // Remove notification after delay
    setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
            notification.remove();
        }, 300);
    }, 3000);
}

// Function to populate the filter dropdown
function populateFilter() {
    const filterSelect = document.getElementById('filterBarangay');
    
    // Add All option
    const allOption = document.createElement('option');
    allOption.value = '';
    allOption.textContent = 'All Barangays';
    filterSelect.appendChild(allOption);
    
    Object.keys(barangayData).forEach(key => {
        const option = document.createElement('option');
        option.value = key;
        option.textContent = barangayData[key].name;
        filterSelect.appendChild(option);
    });
    
    // Add event listener
    filterSelect.addEventListener('change', function() {
        const selectedBarangay = this.value;
        if (selectedBarangay === '') {
            populateTable();
        } else {
            const filteredData = {};
            filteredData[selectedBarangay] = barangayData[selectedBarangay];
            populateTable(filteredData);
        }
    });
}

// Function to implement search functionality
function setupSearch() {
    const searchInput = document.getElementById('searchInput');
    
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase();
        
        if (searchTerm === '') {
            populateTable();
            return;
        }
        
        const filteredData = {};
        
        Object.keys(barangayData).forEach(key => {
            const barangay = barangayData[key];
            
            // Check if barangay name contains search term
            if (barangay.name.toLowerCase().includes(searchTerm)) {
                filteredData[key] = barangay;
                return;
            }
            
            // Check if any purok contains search term
            const matchingPuroks = barangay.puroks.filter(purok => 
                purok.toLowerCase().includes(searchTerm)
            );
            
            if (matchingPuroks.length > 0) {
                filteredData[key] = barangay;
            }
        });
        
        populateTable(filteredData);
    });
}

// Function to show barangay details in a modal
function showBarangayDetails(barangay) {
    // Create modal overlay
    const overlay = document.createElement('div');
    overlay.className = 'modal-overlay';
    
    // Create modal content
    const modal = document.createElement('div');
    modal.className = 'modal';
    
    // Create modal header
    const modalHeader = document.createElement('div');
    modalHeader.className = 'modal-header';
    
    const modalTitle = document.createElement('h2');
    modalTitle.textContent = barangay.name;
    
    const closeButton = document.createElement('button');
    closeButton.className = 'modal-close';
    closeButton.innerHTML = '&times;';
    closeButton.onclick = () => {
        overlay.classList.remove('active');
        setTimeout(() => overlay.remove(), 300);
    };
    
    modalHeader.appendChild(modalTitle);
    modalHeader.appendChild(closeButton);
    
    // Create modal body
    const modalBody = document.createElement('div');
    modalBody.className = 'modal-body';
    
    // Statistics
    const statsSection = document.createElement('div');
    statsSection.className = 'stats-section';
    
    const pwdStat = document.createElement('div');
    pwdStat.className = 'stat-box';
    pwdStat.innerHTML = `
        <div class="stat-icon"><i class="fas fa-wheelchair"></i></div>
        <div class="stat-info">
            <div class="stat-value">${barangay.pwdCount}</div>
            <div class="stat-label">PWD Residents</div>
        </div>
    `;
    
    const seniorStat = document.createElement('div');
    seniorStat.className = 'stat-box';
    seniorStat.innerHTML = `
        <div class="stat-icon"><i class="fas fa-user-friends"></i></div>
        <div class="stat-info">
            <div class="stat-value">${barangay.seniorCount}</div>
            <div class="stat-label">Senior Citizens</div>
        </div>
    `;
    
    const totalStat = document.createElement('div');
    totalStat.className = 'stat-box';
    totalStat.innerHTML = `
        <div class="stat-icon"><i class="fas fa-users"></i></div>
        <div class="stat-info">
            <div class="stat-value">${barangay.pwdCount + barangay.seniorCount}</div>
            <div class="stat-label">Total Priority</div>
        </div>
    `;
    
    statsSection.appendChild(pwdStat);
    statsSection.appendChild(seniorStat);
    statsSection.appendChild(totalStat);
    
    // Puroks list
    const puroksSection = document.createElement('div');
    puroksSection.className = 'puroks-section';
    
    const puroksTitle = document.createElement('h3');
    puroksTitle.textContent = 'Puroks';
    
    const puroksList = document.createElement('div');
    puroksList.className = 'puroks-list';
    
    barangay.puroks.forEach(purok => {
        const purokTag = document.createElement('span');
        purokTag.className = 'purok-tag';
        purokTag.textContent = purok;
        puroksList.appendChild(purokTag);
    });
    
    puroksSection.appendChild(puroksTitle);
    puroksSection.appendChild(puroksList);
    
    // Add sections to body
    modalBody.appendChild(statsSection);
    modalBody.appendChild(puroksSection);
    
    // Add buttons
    const modalFooter = document.createElement('div');
    modalFooter.className = 'modal-footer';
    
    const exportBtn = document.createElement('button');
    exportBtn.className = 'btn btn-primary';
    exportBtn.innerHTML = '<i class="fas fa-file-export"></i> Export Data';
    exportBtn.onclick = () => alert(`Exporting data for ${barangay.name}`);
    
    const printBtn = document.createElement('button');
    printBtn.className = 'btn btn-secondary';
    printBtn.innerHTML = '<i class="fas fa-print"></i> Print Report';
    printBtn.onclick = () => alert(`Printing report for ${barangay.name}`);
    
    modalFooter.appendChild(exportBtn);
    modalFooter.appendChild(printBtn);
    
    // Assemble modal
    modal.appendChild(modalHeader);
    modal.appendChild(modalBody);
    modal.appendChild(modalFooter);
    overlay.appendChild(modal);
    
    // Add to DOM and animate
    document.body.appendChild(overlay);
    setTimeout(() => overlay.classList.add('active'), 10);
}

// Function to edit barangay data
function editBarangayData(id, barangay) {
    // Create modal overlay
    const overlay = document.createElement('div');
    overlay.className = 'modal-overlay';
    
    // Create modal content
    const modal = document.createElement('div');
    modal.className = 'modal';
    
    // Create modal header
    const modalHeader = document.createElement('div');
    modalHeader.className = 'modal-header';
    
    const modalTitle = document.createElement('h2');
    modalTitle.textContent = `Edit ${barangay.name}`;
    
    const closeButton = document.createElement('button');
    closeButton.className = 'modal-close';
    closeButton.innerHTML = '&times;';
    closeButton.onclick = () => {
        overlay.classList.remove('active');
        setTimeout(() => overlay.remove(), 300);
    };
    
    modalHeader.appendChild(modalTitle);
    modalHeader.appendChild(closeButton);
    
    // Create modal body with form
    const modalBody = document.createElement('div');
    modalBody.className = 'modal-body';
    
    const form = document.createElement('form');
    form.className = 'edit-form';
    
    // PWD count input
    const pwdGroup = document.createElement('div');
    pwdGroup.className = 'form-group';
    
    const pwdLabel = document.createElement('label');
    pwdLabel.htmlFor = 'pwdCount';
    pwdLabel.textContent = 'PWD Count';
    
    const pwdInput = document.createElement('input');
    pwdInput.type = 'number';
    pwdInput.id = 'pwdCount';
    pwdInput.value = barangay.pwdCount;
    pwdInput.min = 0;
    
    pwdGroup.appendChild(pwdLabel);
    pwdGroup.appendChild(pwdInput);
    
    // Senior count input
    const seniorGroup = document.createElement('div');
    seniorGroup.className = 'form-group';
    
    const seniorLabel = document.createElement('label');
    seniorLabel.htmlFor = 'seniorCount';
    seniorLabel.textContent = 'Senior Citizens Count';
    
    const seniorInput = document.createElement('input');
    seniorInput.type = 'number';
    seniorInput.id = 'seniorCount';
    seniorInput.value = barangay.seniorCount;
    seniorInput.min = 0;
    
    seniorGroup.appendChild(seniorLabel);
    seniorGroup.appendChild(seniorInput);
    
    // Append form groups
    form.appendChild(pwdGroup);
    form.appendChild(seniorGroup);
    
    modalBody.appendChild(form);
    
    // Add buttons
    const modalFooter = document.createElement('div');
    modalFooter.className = 'modal-footer';
    
    const saveBtn = document.createElement('button');
    saveBtn.className = 'btn btn-primary';
    saveBtn.textContent = 'Save Changes';
    saveBtn.onclick = (e) => {
        e.preventDefault();
        // Update data
        barangayData[id].pwdCount = parseInt(pwdInput.value);
        barangayData[id].seniorCount = parseInt(seniorInput.value);
        
        // Refresh table
        populateTable();
        
        // Close modal
        overlay.classList.remove('active');
        setTimeout(() => overlay.remove(), 300);
        
        // Show notification
        showNotification(`Updated data for ${barangay.name}`);
    };
    
    const cancelBtn = document.createElement('button');
    cancelBtn.className = 'btn btn-secondary';
    cancelBtn.textContent = 'Cancel';
    cancelBtn.onclick = (e) => {
        e.preventDefault();
        overlay.classList.remove('active');
        setTimeout(() => overlay.remove(), 300);
    };
    
    modalFooter.appendChild(saveBtn);
    modalFooter.appendChild(cancelBtn);
    
    // Assemble modal
    modal.appendChild(modalHeader);
    modal.appendChild(modalBody);
    modal.appendChild(modalFooter);
    overlay.appendChild(modal);
    
    // Add to DOM and animate
    document.body.appendChild(overlay);
    setTimeout(() => overlay.classList.add('active'), 10);
}

// Function to generate a consistent color for badges based on barangay ID
function getColorForBadge(id) {
    const colors = [
        '#3498db', '#2ecc71', '#9b59b6', '#e74c3c', '#f39c12',
        '#1abc9c', '#d35400', '#34495e', '#16a085', '#27ae60',
        '#2980b9', '#8e44ad', '#c0392b', '#f1c40f', '#7f8c8d',
        '#3498db'
    ];
    
    return colors[id % colors.length];
}

// Function to initialize chart for dashboard summary
function initializeDashboardChart() {
    const ctx = document.getElementById('dashboardChart').getContext('2d');
    
    // Prepare data
    const labels = Object.values(barangayData).map(b => b.name);
    const pwdData = Object.values(barangayData).map(b => b.pwdCount);
    const seniorData = Object.values(barangayData).map(b => b.seniorCount);
    
    // Create chart
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                {
                    label: 'PWD Residents',
                    backgroundColor: '#3498db',
                    data: pwdData
                },
                {
                    label: 'Senior Citizens',
                    backgroundColor: '#f39c12',
                    data: seniorData
                }
            ]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    stacked: false,
                    title: {
                        display: true,
                        text: 'Barangays'
                    }
                },
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Number of Residents'
                    }
                }
            },
            plugins: {
                legend: {
                    position: 'top'
                },
                title: {
                    display: true,
                    text: 'PWD and Senior Citizens by Barangay'
                }
            }
        }
    });
}

// Summary stats calculation
function updateSummaryStats() {
    const totalPWD = Object.values(barangayData).reduce((sum, b) => sum + b.pwdCount, 0);
    const totalSeniors = Object.values(barangayData).reduce((sum, b) => sum + b.seniorCount, 0);
    const totalBarangays = Object.keys(barangayData).length;
    
    document.getElementById('totalPWD').textContent = totalPWD;
    document.getElementById('totalSeniors').textContent = totalSeniors;
    document.getElementById('totalBarangays').textContent = totalBarangays;
    document.getElementById('totalPriority').textContent = totalPWD + totalSeniors;
}

// Initialize the page
document.addEventListener('DOMContentLoaded', function() {
    // Setup dashboard elements if they exist
    const dashboardEl = document.getElementById('dashboardChart');
    if (dashboardEl) {
        initializeDashboardChart();
    }
    
    // Update summary stats
    updateSummaryStats();
    
    // Initialize table and filters
    populateTable();
    populateFilter();
    setupSearch();
});
        
</script>
</body>

</html>
