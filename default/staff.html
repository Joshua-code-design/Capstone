<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barangay Registration Form</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #3b82f6;
            --primary-dark: #2563eb;
            --primary-light: #dbeafe;
            --secondary-color: #f8fafc;
            --text-color: #1e293b;
            --light-gray: #e2e8f0;
            --border-color: #cbd5e1;
            --success-color: #10b981;
            --error-color: #ef4444;
            --box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --border-radius: 12px;
            --font-size-large: 1.25rem;
            --font-size-normal: 1rem;
            --transition: all 0.3s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #f1f5f9;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background-color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        .header h1 {
            color: var(--primary-color);
            font-size: 2.2rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #64748b;
            font-size: var(--font-size-normal);
        }

        .form-container {
            background-color: white;
            padding: 40px;
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
        }

        /* Progress Bar Styles */
        .progress-container {
            margin-bottom: 40px;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            margin-bottom: 30px;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            height: 4px;
            width: 100%;
            background-color: var(--light-gray);
            z-index: 0;
        }

        .progress-bar {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            height: 4px;
            background-color: var(--primary-color);
            transition: width 0.3s ease;
            z-index: 1;
        }

        .step {
            width: 40px;
            height: 40px;
            background-color: white;
            border: 4px solid var(--light-gray);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--text-color);
            position: relative;
            z-index: 2;
            transition: var(--transition);
        }

        .step.active {
            border-color: var(--primary-color);
            background-color: var(--primary-light);
            color: var(--primary-dark);
        }

        .step.completed {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
            color: white;
        }

        .step-label {
            position: absolute;
            top: 45px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 0.9rem;
            font-weight: 600;
            color: #64748b;
        }

        .step.active .step-label {
            color: var(--primary-dark);
        }

        .section-title {
            color: var(--primary-dark);
            font-size: var(--font-size-large);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--primary-light);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            background-color: var(--primary-light);
            color: var(--primary-dark);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .form-step {
            display: none;
        }

        .form-step.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -15px 20px;
        }

        .form-column {
            flex: 1;
            padding: 0 15px;
            min-width: 250px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #475569;
            font-size: var(--font-size-normal);
        }

        .form-control {
            width: 100%;
            padding: 14px 18px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: var(--font-size-normal);
            transition: var(--transition);
            background-color: var(--secondary-color);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
        }

        .radio-group,
        .checkbox-group {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .radio-item,
        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .radio-item input[type="radio"],
        .checkbox-item input[type="checkbox"] {
            position: relative;
            width: 20px;
            height: 20px;
            cursor: pointer;
            -webkit-appearance: none;
            appearance: none;
            background-color: var(--secondary-color);
            border: 2px solid var(--border-color);
            border-radius: 50%;
            transition: var(--transition);
        }

        .checkbox-item input[type="checkbox"] {
            border-radius: 4px;
        }

        .radio-item input[type="radio"]:checked,
        .checkbox-item input[type="checkbox"]:checked {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .radio-item input[type="radio"]:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: white;
        }

        .checkbox-item input[type="checkbox"]:checked::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
            font-weight: bold;
        }

        .radio-item label,
        .checkbox-item label {
            font-weight: normal;
            cursor: pointer;
        }

        .btn {
            display: inline-block;
            padding: 14px 28px;
            border: none;
            border-radius: var(--border-radius);
            font-size: var(--font-size-normal);
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.2);
        }

        .btn-secondary {
            background-color: #f1f5f9;
            color: #475569;
            border: 1px solid var(--border-color);
        }

        .btn-secondary:hover {
            background-color: #e2e8f0;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .buttons-container {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }

        .submit-container {
            text-align: center;
            margin-top: 30px;
        }

        /* Accessibility enhancements */
        .high-contrast-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: white;
            border: 1px solid var(--light-gray);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--box-shadow);
            z-index: 100;
        }

        .font-size-controls {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: white;
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            padding: 10px;
            display: flex;
            gap: 10px;
            box-shadow: var(--box-shadow);
            z-index: 100;
        }

        .font-btn {
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 50%;
            border: 1px solid var(--light-gray);
        }

        .font-btn:hover {
            background-color: var(--light-gray);
        }

        /* High contrast theme */
        body.high-contrast {
            background-color: black;
            color: yellow;
        }

        body.high-contrast .header,
        body.high-contrast .form-container {
            background-color: black;
            border: 2px solid yellow;
        }

        body.high-contrast .header h1,
        body.high-contrast .section-title {
            color: yellow;
        }

        body.high-contrast .form-label {
            color: yellow;
        }

        body.high-contrast .form-control {
            background-color: black;
            color: yellow;
            border-color: yellow;
        }

        body.high-contrast .btn-primary {
            background-color: yellow;
            color: black;
        }

        body.high-contrast .step {
            background-color: black;
            border-color: yellow;
            color: yellow;
        }

        body.high-contrast .step.active,
        body.high-contrast .step.completed {
            background-color: yellow;
            color: black;
        }

        body.high-contrast .progress-steps::before {
            background-color: #333;
        }

        body.high-contrast .progress-bar {
            background-color: yellow;
        }

        /* Responsive adjustments */
        @media screen and (max-width: 768px) {
            .form-column {
                flex: 100%;
            }
            
            .container {
                padding: 10px;
            }
            
            .form-container {
                padding: 20px;
            }

            .progress-steps {
                flex-wrap: wrap;
                justify-content: center;
                gap: 20px;
            }

            .progress-steps::before {
                display: none;
            }

            .progress-bar {
                display: none;
            }

            .step {
                margin: 0 10px;
            }

            .step-label {
                font-size: 0.8rem;
            }
        }

        /* Success message */
        .success-message {
            display: none;
            background-color: var(--success-color);
            color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            margin-top: 30px;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        /* Helper text for PWD and Senior Citizens */
        .helper-text {
            display: block;
            font-size: 0.9rem;
            color: #64748b;
            margin-top: 5px;
        }

        /* Required field indicator */
        .required:after {
            content: " *";
            color: var(--error-color);
        }

        /* Senior and PWD specific sections */
        .conditional-section {
            padding: 20px;
            border: 1px solid var(--light-gray);
            border-radius: var(--border-radius);
            margin-top: 15px;
            display: none;
            background-color: #fafafa;
            animation: fadeIn 0.5s ease;
        }

        .additional-info {
            font-style: italic;
            color: #64748b;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="form-container">
            <form id="registrationForm">
                <!-- Progress Bar -->
                <div class="progress-container">
                    <div class="progress-steps">
                        <div class="progress-bar" id="progressBar"></div>
                        <div class="step active" data-step="1">
                            1
                            <span class="step-label">Personal Info</span>
                        </div>
                        <div class="step" data-step="2">
                            2
                            <span class="step-label">Contact Info</span>
                        </div>
                        <div class="step" data-step="3">
                            3
                            <span class="step-label">Special Categories</span>
                        </div>
                        <div class="step" data-step="4">
                            4
                            <span class="step-label">Medical Info</span>
                        </div>
                        <div class="step" data-step="5">
                            5
                            <span class="step-label">Review</span>
                        </div>
                    </div>
                </div>

                <!-- Step 1: Personal Information Section -->
                <div class="form-step active" id="step1">
                    <h2 class="section-title"><i class="fas fa-user"></i> Personal Information</h2>
                    
                    <div class="form-row">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="firstName" class="form-label required">First Name</label>
                                <input type="text" id="firstName" name="firstName" class="form-control" required>
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label for="lastName" class="form-label required">Last Name</label>
                                <input type="text" id="lastName" name="lastName" class="form-control" required>
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label for="middleName" class="form-label">Middle Name</label>
                                <input type="text" id="middleName" name="middleName" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="birthdate" class="form-label required">Date of Birth</label>
                                <input type="date" id="birthdate" name="birthdate" class="form-control" required onchange="calculateAge()">
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label for="age" class="form-label">Age</label>
                                <input type="number" id="age" name="age" class="form-control" readonly>
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label class="form-label required">Gender</label>
                                <div class="radio-group">
                                    <div class="radio-item">
                                        <input type="radio" id="male" name="gender" value="male" required>
                                        <label for="male">Male</label>
                                    </div>
                                    <div class="radio-item">
                                        <input type="radio" id="female" name="gender" value="female">
                                        <label for="female">Female</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="barangay" class="form-label required">Barangay</label>
                                <select id="barangay" name="barangay" class="form-control" required onchange="updatePurok()">
                                    <option value="" disabled selected>Select Barangay</option>
                                    <option value="1">Barangay 1</option>
                                    <option value="2">Barangay 2</option>
                                    <option value="3">Barangay 3</option>
                                    <option value="4">Barangay 4</option>
                                    <option value="5">Barangay 5</option>
                                    <option value="6">Barangay Mambulac</option>
                                    <option value="7">Barangay Guinhalaran</option>
                                    <option value="8">Barangay E-Lopez</option>
                                    <option value="9">Barangay Bagtic</option>
                                    <option value="10">Barangay Balaring</option>
                                    <option value="11">Barangay Hawaiian</option>
                                    <option value="12">Barangay Patag</option>
                                    <option value="13">Barangay Kapt. Ramon</option>
                                    <option value="14">Barangay Guimbalaon</option>
                                    <option value="15">Barangay Rizal</option>
                                    <option value="16">Barangay Lantad</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label for="purok" class="form-label required">Purok</label>
                                <select id="purok" name="purok" class="form-control" required>
                                    <option value="" disabled selected>Select Purok</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="buttons-container">
                        <div></div> <!-- Empty div for spacing -->
                        <button type="button" class="btn btn-primary" onclick="nextStep(1)">Next <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <!-- Step 2: Contact Information Section -->
                <div class="form-step" id="step2">
                    <h2 class="section-title"><i class="fas fa-phone-alt"></i> Contact Information</h2>
                    
                    <div class="form-row">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="contactNumber" class="form-label">Mobile Number</label>
                                <input type="tel" id="contactNumber" name="contactNumber" class="form-control" placeholder="Ex: 09123456789">
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label for="email" class="form-label">Email Address</label>
                                <input type="email" id="email" name="email" class="form-control" placeholder="example@email.com">
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label for="emergencyContact" class="form-label">Emergency Contact Number</label>
                                <input type="tel" id="emergencyContact" name="emergencyContact" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="emergencyContactName" class="form-label">Emergency Contact Name</label>
                                <input type="text" id="emergencyContactName" name="emergencyContactName" class="form-control">
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label for="relationship" class="form-label">Relationship to Emergency Contact</label>
                                <input type="text" id="relationship" name="relationship" class="form-control">
                            </div>
                        </div>
                    </div>

                    <div class="buttons-container">
                        <button type="button" class="btn btn-secondary" onclick="prevStep(2)"><i class="fas fa-arrow-left"></i> Previous</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep(2)">Next <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <!-- Step 3: Special Categories Section -->
                <div class="form-step" id="step3">
                    <h2 class="section-title"><i class="fas fa-hand-holding-heart"></i> Special Categories</h2>
                    
                    <div class="form-group">
                        <label class="form-label">Special Category (if applicable)</label>
                        <div class="checkbox-group">
                            <div class="checkbox-item">
                                <input type="checkbox" id="pwd" name="status" value="pwd" onchange="togglePWDSection()">
                                <label for="pwd">Person with Disability (PWD)</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="senior" name="status" value="senior" onchange="toggleSeniorSection()">
                                <label for="senior">Senior Citizen</label>
                            </div>
                            <div class="checkbox-item">
                                <input type="checkbox" id="indigent" name="status" value="indigent">
                                <label for="indigent">Both Pwd & Senior</label>
                            </div>
                        </div>
                    </div>

                    <!-- PWD Specific Section -->
                    <div id="pwdSection" class="conditional-section">
                        <p class="additional-info">Please provide information about your disability to help us serve you better</p>
                        
                        <div class="form-group">
                            <label for="pwdIdNumber" class="form-label">PWD ID Number (if available)</label>
                            <input type="text" id="pwdIdNumber" name="pwdIdNumber" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="disabilityType" class="form-label">Type of Disability</label>
                            <select id="disabilityType" name="disabilityType" class="form-control">
                                <option value="" disabled selected>Select Disability Type</option>
                                <option value="physical">Physical (Orthopedic)</option>
                                <option value="visual">Visual Impairment</option>
                                <option value="hearing">Hearing Impairment</option>
                                <option value="speech">Speech Impairment</option>
                                <option value="intellectual">Intellectual Disability</option>
                                <option value="psychosocial">Psychosocial Disability</option>
                                <option value="learning">Learning Disability</option>
                                <option value="multiple">Multiple Disabilities</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="accommodationNeeds" class="form-label">Specific Accommodation Needs</label>
                            <textarea id="accommodationNeeds" name="accommodationNeeds" class="form-control" rows="3" placeholder="Please describe any assistance or accommodation you may need"></textarea>
                        </div>
                    </div>

                    <!-- Senior Citizen Specific Section -->
                    <div id="seniorSection" class="conditional-section">
                        <p class="additional-info">Please provide your senior citizen information</p>
                        
                        <div class="form-group">
                            <label for="seniorIdNumber" class="form-label">Senior Citizen ID Number (if available)</label>
                            <input type="text" id="seniorIdNumber" name="seniorIdNumber" class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="pensioner" class="form-label">Pensioner Status</label>
                            <div class="radio-group">
                                <div class="radio-item">
                                    <input type="radio" id="pensionerYes" name="pensioner" value="yes">
                                    <label for="pensionerYes">Receiving Pension</label>
                                </div>
                                <div class="radio-item">
                                    <input type="radio" id="pensionerNo" name="pensioner" value="no">
                                    <label for="pensionerNo">Not Receiving Pension</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="livingArrangement" class="form-label">Living Arrangement</label>
                            <select id="livingArrangement" name="livingArrangement" class="form-control">
                                <option value="" disabled selected>Select Living Arrangement</option>
                                <option value="alone">Living Alone</option>
                                <option value="spouse">With Spouse</option>
                                <option value="children">With Children</option>
                                <option value="relatives">With Other Relatives</option>
                                <option value="caregiver">With Caregiver</option>
                                <option value="facility">In a Care Facility</option>
                            </select>
                        </div>
                    </div>

                    <div class="buttons-container">
                        <button type="button" class="btn btn-secondary" onclick="prevStep(3)"><i class="fas fa-arrow-left"></i> Previous</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep(3)">Next <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <!-- Step 4: Medical Information Section -->
                <div class="form-step" id="step4">
                    <h2 class="section-title"><i class="fas fa-heartbeat"></i> Medical Information</h2>
                    
                    <div class="form-group">
                        <label for="disease" class="form-label">Medical Conditions (if any)</label>
                        <textarea id="disease" name="disease" class="form-control" rows="3" placeholder="List any medical conditions, allergies, or medications you are currently taking"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-column">
                            <div class="form-group">
                                <label for="healthInsurance" class="form-label">Health Insurance</label>
                                <input type="text" id="healthInsurance" name="healthInsurance" class="form-control" placeholder="e.g., PhilHealth, HMO">
                            </div>
                        </div>
                        <div class="form-column">
                            <div class="form-group">
                                <label for="bloodType" class="form-label">Blood Type</label>
                                <select id="bloodType" name="bloodType" class="form-control">
                                    <option value="" disabled selected>Select Blood Type</option>
                                    <option value="A+">A+</option>
                                    <option value="A-">A-</option>
                                    <option value="B+">B+</option>
                                    <option value="B-">B-</option>
                                    <option value="AB+">AB+</option>
                                    <option value="AB-">AB-</option>
                                    <option value="O+">O+</option>
                                    <option value="O-">O-</option>
                                    <option value="unknown">Unknown</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="medications" class="form-label">Current Medications</label>
                        <textarea id="medications" name="medications" class="form-control" rows="2" placeholder="List any medications you are currently taking"></textarea>
                    </div>

                    <div class="buttons-container">
                        <button type="button" class="btn btn-secondary" onclick="prevStep(4)"><i class="fas fa-arrow-left"></i> Previous</button>
                        <button type="button" class="btn btn-primary" onclick="nextStep(4)">Review <i class="fas fa-arrow-right"></i></button>
                    </div>
                </div>

                <!-- Step 5: Review Information Section -->
                <div class="form-step" id="step5">
                    <h2 class="section-title"><i class="fas fa-check-circle"></i> Review Your Information</h2>
                    
                    <div class="review-container">
                        <div class="review-section">
                            <h3>Personal Information</h3>
                            <div class="review-grid">
                                <div class="review-item">
                                    <span class="review-label">Name:</span>
                                    <span class="review-value" id="review-name">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Date of Birth:</span>
                                    <span class="review-value" id="review-birthdate">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Age:</span>
                                    <span class="review-value" id="review-age">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Gender:</span>
                                    <span class="review-value" id="review-gender">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Barangay:</span>
                                    <span class="review-value" id="review-barangay">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Purok:</span>
                                    <span class="review-value" id="review-purok">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="review-section">
                            <h3>Contact Information</h3>
                            <div class="review-grid">
                                <div class="review-item">
                                    <span class="review-label">Mobile Number:</span>
                                    <span class="review-value" id="review-contactNumber">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Email Address:</span>
                                    <span class="review-value" id="review-email">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Emergency Contact:</span>
                                    <span class="review-value" id="review-emergencyContact">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Emergency Contact Name:</span>
                                    <span class="review-value" id="review-emergencyContactName">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Relationship:</span>
                                    <span class="review-value" id="review-relationship">-</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="review-section" id="review-special-section">
                            <h3>Special Categories</h3>
                            <div class="review-grid">
                                <div class="review-item">
                                    <span class="review-label">Special Category:</span>
                                    <span class="review-value" id="review-status">-</span>
                                </div>
                            </div>
                            
                            <!-- PWD Review -->
                            <div id="review-pwd-section" class="review-subsection">
                                <h4>PWD Information</h4>
                                <div class="review-grid">
                                    <div class="review-item">
                                        <span class="review-label">PWD ID Number:</span>
                                        <span class="review-value" id="review-pwdIdNumber">-</span>
                                    </div>
                                    <div class="review-item">
                                        <span class="review-label">Disability Type:</span>
                                        <span class="review-value" id="review-disabilityType">-</span>
                                    </div>
                                    <div class="review-item">
                                        <span class="review-label">Accommodation Needs:</span>
                                        <span class="review-value" id="review-accommodationNeeds">-</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Senior Citizen Review -->
                            <div id="review-senior-section" class="review-subsection">
                                <h4>Senior Citizen Information</h4>
                                <div class="review-grid">
                                    <div class="review-item">
                                        <span class="review-label">Senior ID Number:</span>
                                        <span class="review-value" id="review-seniorIdNumber">-</span>
                                    </div>
                                    <div class="review-item">
                                        <span class="review-label">Pensioner Status:</span>
                                        <span class="review-value" id="review-pensioner">-</span>
                                    </div>
                                    <div class="review-item">
                                        <span class="review-label">Living Arrangement:</span>
                                        <span class="review-value" id="review-livingArrangement">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="review-section">
                            <h3>Medical Information</h3>
                            <div class="review-grid">
                                <div class="review-item">
                                    <span class="review-label">Medical Conditions:</span>
                                    <span class="review-value" id="review-disease">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Health Insurance:</span>
                                    <span class="review-value" id="review-healthInsurance">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Blood Type:</span>
                                    <span class="review-value" id="review-bloodType">-</span>
                                </div>
                                <div class="review-item">
                                    <span class="review-label">Current Medications:</span>
                                    <span class="review-value" id="review-medications">-</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <div class="checkbox-item consent-checkbox">
                            <input type="checkbox" id="consent" name="consent" required>
                            <label for="consent" class="required">I hereby certify that the information provided is true and correct to the best of my knowledge.</label>
                        </div>
                    </div>

                    <div class="buttons-container">
                        <button type="button" class="btn btn-secondary" onclick="prevStep(5)"><i class="fas fa-arrow-left"></i> Previous</button>
                        <button type="submit" class="btn btn-success" id="submitButton" disabled>Submit Registration <i class="fas fa-paper-plane"></i></button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://kit.fontawesome.com/your-fontawesome-kit.js" crossorigin="anonymous"></script>
    <script>
        // Purok data for each barangay
        const purokData = {
            '1': ['Purok 1', 'Purok 2', 'Purok 3', 'Purok 4', 'Purok 5'],
            '2': ['Purok 1', 'Purok 2', 'Purok 3', 'Purok Masagana', 'Purok Matiwasay'],
            '3': ['Purok 1', 'Purok 2', 'Purok 3', 'Purok 4', 'Purok 5', 'Purok 6'],
            '4': ['Purok A', 'Purok B', 'Purok C', 'Purok D', 'Purok E'],
            '5': ['Purok Norte', 'Purok Sur', 'Purok Este', 'Purok Oeste', 'Purok Central'],
            '6': ['Purok 1', 'Purok 2', 'Purok 3', 'Purok 4'],
            '7': ['Purok A', 'Purok B', 'Purok C', 'Purok D'],
            '8': ['Purok 1', 'Purok 2', 'Purok 3'],
            '9': ['Purok Mangga', 'Purok Santol', 'Purok Bayabas', 'Purok Niyog'],
            '10': ['Purok Dagat', 'Purok Ilog', 'Purok Batis', 'Purok Bukal'],
            '11': ['Purok 1', 'Purok 2', 'Purok 3', 'Purok 4'],
            '12': ['Purok A', 'Purok B', 'Purok C'],
            '13': ['Purok 1', 'Purok 2', 'Purok 3', 'Purok 4'],
            '14': ['Purok Mabuhay', 'Purok Pagkakaisa', 'Purok Kalayaan'],
            '15': ['Purok 1', 'Purok 2', 'Purok 3', 'Purok 4'],
            '16': ['Purok A', 'Purok B', 'Purok C', 'Purok D']
        };

        // Function to calculate age based on birthdate
        function calculateAge() {
            const birthdateInput = document.getElementById('birthdate');
            const ageInput = document.getElementById('age');
            
            if (birthdateInput.value) {
                const birthdate = new Date(birthdateInput.value);
                const today = new Date();
                
                let age = today.getFullYear() - birthdate.getFullYear();
                const monthDiff = today.getMonth() - birthdate.getMonth();
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthdate.getDate())) {
                    age--;
                }
                
                ageInput.value = age;
                
                // Auto check Senior Citizen if age is 60 or above
                const seniorCheckbox = document.getElementById('senior');
                if (age >= 60) {
                    seniorCheckbox.checked = true;
                    toggleSeniorSection();
                } else if (seniorCheckbox.checked && age < 60) {
                    seniorCheckbox.checked = false;
                    toggleSeniorSection();
                }
            }
        }

        // Function to update purok options based on selected barangay
        function updatePurok() {
            const barangaySelect = document.getElementById('barangay');
            const purokSelect = document.getElementById('purok');
            
            // Clear current options
            purokSelect.innerHTML = '<option value="" disabled selected>Select Purok</option>';
            
            const selectedBarangay = barangaySelect.value;
            if (selectedBarangay && purokData[selectedBarangay]) {
                // Add new options based on selected barangay
                purokData[selectedBarangay].forEach(purok => {
                    const option = document.createElement('option');
                    option.value = purok;
                    option.textContent = purok;
                    purokSelect.appendChild(option);
                });
            }
        }

        // Function to toggle PWD specific section
        function togglePWDSection() {
            const pwdCheckbox = document.getElementById('pwd');
            const pwdSection = document.getElementById('pwdSection');
            
            if (pwdCheckbox.checked) {
                pwdSection.style.display = 'block';
            } else {
                pwdSection.style.display = 'none';
            }
        }

        // Function to toggle Senior Citizen specific section
        function toggleSeniorSection() {
            const seniorCheckbox = document.getElementById('senior');
            const seniorSection = document.getElementById('seniorSection');
            
            if (seniorCheckbox.checked) {
                seniorSection.style.display = 'block';
            } else {
                seniorSection.style.display = 'none';
            }
        }

        // Function to handle next step
        function nextStep(currentStep) {
            // Validate current step first
            if (!validateStep(currentStep)) {
                return false;
            }
            
            // Hide current step
            document.getElementById(`step${currentStep}`).classList.remove('active');
            // Show next step
            document.getElementById(`step${currentStep + 1}`).classList.add('active');
            
            // Update progress bar and active step
            updateProgress(currentStep + 1);
            
            // If moving to review step, populate review fields
            if (currentStep === 4) {
                populateReview();
            }
            
            // Scroll to top of the form
            window.scrollTo({
                top: document.querySelector('.form-container').offsetTop,
                behavior: 'smooth'
            });
            
            return true;
        }

        // Function to handle previous step
        function prevStep(currentStep) {
            // Hide current step
            document.getElementById(`step${currentStep}`).classList.remove('active');
            // Show previous step
            document.getElementById(`step${currentStep - 1}`).classList.add('active');
            
            // Update progress bar and active step
            updateProgress(currentStep - 1);
            
            // Scroll to top of the form
            window.scrollTo({
                top: document.querySelector('.form-container').offsetTop,
                behavior: 'smooth'
            });
            
            return true;
        }

        // Function to update progress bar
        function updateProgress(step) {
            // Update progress bar width
            const progressBar = document.getElementById('progressBar');
            const progressPercentage = ((step - 1) / 4) * 100;
            progressBar.style.width = `${progressPercentage}%`;
            
            // Update active step indicator
            const steps = document.querySelectorAll('.step');
            steps.forEach(stepElement => {
                const stepNumber = parseInt(stepElement.getAttribute('data-step'));
                if (stepNumber <= step) {
                    stepElement.classList.add('active');
                } else {
                    stepElement.classList.remove('active');
                }
            });
        }

        // Function to validate each step
        function validateStep(step) {
            let isValid = true;
            
            switch(step) {
                case 1:
                    // Validate Personal Information
                    const requiredFields1 = ['firstName', 'lastName', 'birthdate', 'barangay', 'purok'];
                    requiredFields1.forEach(field => {
                        const input = document.getElementById(field);
                        if (!input.value.trim()) {
                            markInvalid(input);
                            isValid = false;
                        } else {
                            markValid(input);
                        }
                    });
                    
                    // Validate gender selection
                    const genderSelected = document.getElementById('male').checked || document.getElementById('female').checked;
                    if (!genderSelected) {
                        alert('Please select a gender.');
                        isValid = false;
                    }
                    break;
                    
                case 2:
                    // Contact Information (optional fields, no validation needed)
                    isValid = true;
                    break;
                    
                case 3:
                    // Special Categories (conditional validation)
                    if (document.getElementById('pwd').checked) {
                        // Only validate disability type if PWD is checked
                        const disabilityType = document.getElementById('disabilityType');
                        if (!disabilityType.value) {
                            markInvalid(disabilityType);
                            isValid = false;
                        } else {
                            markValid(disabilityType);
                        }
                    }
                    
                    if (document.getElementById('senior').checked) {
                        // Only validate living arrangement if Senior is checked
                        const livingArrangement = document.getElementById('livingArrangement');
                        if (!livingArrangement.value) {
                            markInvalid(livingArrangement);
                            isValid = false;
                        } else {
                            markValid(livingArrangement);
                        }
                        
                        // Validate pensioner status
                        const pensionerSelected = document.getElementById('pensionerYes').checked || 
                                                document.getElementById('pensionerNo').checked;
                        if (!pensionerSelected) {
                            alert('Please select a pensioner status.');
                            isValid = false;
                        }
                    }
                    break;
                    
                case 4:
                    // Medical Information (optional fields, no validation needed)
                    isValid = true;
                    break;
            }
            
            return isValid;
        }

        // Function to mark field as invalid
        function markInvalid(element) {
            element.classList.add('is-invalid');
            element.addEventListener('input', function() {
                if (this.value.trim()) {
                    this.classList.remove('is-invalid');
                }
            }, { once: true });
        }

        // Function to mark field as valid
        function markValid(element) {
            element.classList.remove('is-invalid');
        }

        // Function to populate review section
        function populateReview() {
            // Personal Information
            document.getElementById('review-name').textContent = 
                `${document.getElementById('firstName').value} ${document.getElementById('middleName').value ? document.getElementById('middleName').value + ' ' : ''}${document.getElementById('lastName').value}`;
            document.getElementById('review-birthdate').textContent = formatDate(document.getElementById('birthdate').value);
            document.getElementById('review-age').textContent = document.getElementById('age').value;
            document.getElementById('review-gender').textContent = document.querySelector('input[name="gender"]:checked') ? 
                document.querySelector('input[name="gender"]:checked').value.charAt(0).toUpperCase() + document.querySelector('input[name="gender"]:checked').value.slice(1) : '-';
            
            const barangaySelect = document.getElementById('barangay');
            document.getElementById('review-barangay').textContent = barangaySelect.options[barangaySelect.selectedIndex].text;
            
            const purokSelect = document.getElementById('purok');
            document.getElementById('review-purok').textContent = purokSelect.value;
            
            // Contact Information
            document.getElementById('review-contactNumber').textContent = document.getElementById('contactNumber').value || '-';
            document.getElementById('review-email').textContent = document.getElementById('email').value || '-';
            document.getElementById('review-emergencyContact').textContent = document.getElementById('emergencyContact').value || '-';
            document.getElementById('review-emergencyContactName').textContent = document.getElementById('emergencyContactName').value || '-';
            document.getElementById('review-relationship').textContent = document.getElementById('relationship').value || '-';
            
            // Special Categories
            const specialCategories = [];
            if (document.getElementById('pwd').checked) specialCategories.push('Person with Disability');
            if (document.getElementById('senior').checked) specialCategories.push('Senior Citizen');
            if (document.getElementById('indigent').checked) specialCategories.push('Both PWD & Senior');
            document.getElementById('review-status').textContent = specialCategories.length > 0 ? specialCategories.join(', ') : 'None';
            
            // Show/hide PWD review section
            if (document.getElementById('pwd').checked) {
                document.getElementById('review-pwd-section').style.display = 'block';
                document.getElementById('review-pwdIdNumber').textContent = document.getElementById('pwdIdNumber').value || '-';
                
                const disabilityTypeSelect = document.getElementById('disabilityType');
                document.getElementById('review-disabilityType').textContent = disabilityTypeSelect.value ? 
                    disabilityTypeSelect.options[disabilityTypeSelect.selectedIndex].text : '-';
                    
                document.getElementById('review-accommodationNeeds').textContent = document.getElementById('accommodationNeeds').value || '-';
            } else {
                document.getElementById('review-pwd-section').style.display = 'none';
            }
            
            // Show/hide Senior review section
            if (document.getElementById('senior').checked) {
                document.getElementById('review-senior-section').style.display = 'block';
                document.getElementById('review-seniorIdNumber').textContent = document.getElementById('seniorIdNumber').value || '-';
                document.getElementById('review-pensioner').textContent = document.querySelector('input[name="pensioner"]:checked') ? 
                    (document.querySelector('input[name="pensioner"]:checked').value === 'yes' ? 'Receiving Pension' : 'Not Receiving Pension') : '-';
                
                const livingArrangementSelect = document.getElementById('livingArrangement');
                document.getElementById('review-livingArrangement').textContent = livingArrangementSelect.value ? 
                    livingArrangementSelect.options[livingArrangementSelect.selectedIndex].text : '-';
            } else {
                document.getElementById('review-senior-section').style.display = 'none';
            }
            
            // If neither PWD nor Senior is checked, hide the entire special section
            if (!document.getElementById('pwd').checked && !document.getElementById('senior').checked && !document.getElementById('indigent').checked) {
                document.getElementById('review-special-section').style.display = 'none';
            } else {
                document.getElementById('review-special-section').style.display = 'block';
            }
            
            // Medical Information
            document.getElementById('review-disease').textContent = document.getElementById('disease').value || '-';
            document.getElementById('review-healthInsurance').textContent = document.getElementById('healthInsurance').value || '-';
            
            const bloodTypeSelect = document.getElementById('bloodType');
            document.getElementById('review-bloodType').textContent = bloodTypeSelect.value ? bloodTypeSelect.value : '-';
            
            document.getElementById('review-medications').textContent = document.getElementById('medications').value || '-';
        }

        // Helper function to format date
        function formatDate(dateString) {
            if (!dateString) return '-';
            
            const date = new Date(dateString);
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('en-US', options);
        }

        // Event listener for consent checkbox
        document.getElementById('consent').addEventListener('change', function() {
            document.getElementById('submitButton').disabled = !this.checked;
        });

        // Event listener for form submission
        document.getElementById('registrationForm').addEventListener('submit', function(event) {
            event.preventDefault();
            
            // Show loading state
            const submitButton = document.getElementById('submitButton');
            const originalText = submitButton.innerHTML;
            submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Submitting...';
            submitButton.disabled = true;
            
            // Simulate form submission (replace with actual submission logic)
            setTimeout(function() {
                // Replace with actual form submission code
                alert('Registration submitted successfully!');
                
                // Reset form
                document.getElementById('registrationForm').reset();
                
                // Go back to first step
                const steps = document.querySelectorAll('.form-step');
                steps.forEach(step => step.classList.remove('active'));
                document.getElementById('step1').classList.add('active');
                updateProgress(1);
                
                // Reset button state
                submitButton.innerHTML = originalText;
                submitButton.disabled = false;
                
                // Hide conditional sections
                document.getElementById('pwdSection').style.display = 'none';
                document.getElementById('seniorSection').style.display = 'none';
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, 2000);
        });

        // Initialize the form on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Hide conditional sections initially
            document.getElementById('pwdSection').style.display = 'none';
            document.getElementById('seniorSection').style.display = 'none';
            document.getElementById('review-pwd-section').style.display = 'none';
            document.getElementById('review-senior-section').style.display = 'none';
            
            // Set up event listeners for radio buttons and checkboxes
            document.getElementById('pwd').addEventListener('change', togglePWDSection);
            document.getElementById('senior').addEventListener('change', toggleSeniorSection);
            
            // Additional validation for mobile number and emergency contact fields
            const phoneInputs = document.querySelectorAll('input[type="tel"]');
            phoneInputs.forEach(input => {
                input.addEventListener('input', function() {
                    // Allow only numbers and limit to 11 digits for Philippine mobile numbers
                    this.value = this.value.replace(/[^0-9]/g, '').substring(0, 11);
                });
            });
        });
    </script>